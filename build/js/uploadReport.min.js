/*! qadashboard 2018-02-08 */

function e(){for(var e=document.getElementById("envir1"),n=document.getElementById("browser"),l=["Envir1","Envir2","Envir3"],o=0;o<l.length;o++)e.options[o]=new Option(l[o],l[o]);var a=["Firefox","Chrome","IE 11","Safari-Desktop","Safari-iOS","IE 10","IE 9","IE 8","Other"];for(o=0;o<a.length;o++)n.options[o]=new Option(a[o],a[o]);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText),t=document.createElement("select");t.id="testName",document.querySelector("#holderbox > table > tbody > tr:nth-child(4) > td:nth-child(2)").appendChild(t);for(var n=0;n<e.length;n++)if(null!=e[n].child){var l=document.createElement("optgroup");l.label=e[n].testName,t.appendChild(l);for(var o=[e[n]],a=[0];o.length>0;)if(a[a.length-1]<=o[o.length-1].child.length-1){for(var r="  ",d=0;d<a.length;d++)r+=r;(s=document.createElement("option")).text=r+o[o.length-1].child[a[a.length-1]].testName,s.value=o[o.length-1].child[a[a.length-1]].id,null!=o[o.length-1].child[a[a.length-1]].child?(s.disabled=!0,l.appendChild(s),o.push(o[o.length-1].child[a[a.length-1]]),a.push(0)):(l.appendChild(s),a[a.length-1]++)}else a.pop(),o.pop(),a[a.length-1]++}else{var s;(s=document.createElement("option")).text=e[n].testName,s.value=e[n]._id,t.appendChild(s)}}else 4==this.readyState&&(document.querySelector("#holderbox").innerHTML=this.responseText)},r.open("GET","./getTestName"),r.send(),t(),"date"!=$("#testDate")[0].type&&$("#testDate").datepicker()}function t(){var e=document.getElementById("envir1"),t=document.getElementById("envir2"),n=2;t.length=0,2==e.selectedIndex&&(n=8);for(var l=0;l<n;l++)t.options[l]=new Option("hive "+l,"hive"+l)}function n(){location.href="home.html"}function l(){var e=document.getElementById("sourceUpload"),t=document.getElementById("testDate"),n=document.getElementById("submitBut");e.files.length>0&&a(t.value)?n.className=n.className.replace(/(?:^|\s)buttonDisabled(?!\S)/g,""):n.className.indexOf("buttonDisabled")<0&&(n.className+=" buttonDisabled")}function o(){var e="",t=document.getElementById("sourceUpload").files[0],n=new FileReader,l=document.getElementById("resultInfo");l.innerHTML='<div id ="loader" class="loader"></div>',l.style.display="block",n.onload=function(t){e=n.result;var o={reportDate:document.getElementById("testDate").value,reportEnvi:document.getElementById("envir1").value,reportHive:document.getElementById("envir2").value,reportBrowser:document.getElementById("browser").value,testID:document.getElementById("testName").value,reportName:document.getElementById("testName").options[document.getElementById("testName").selectedIndex].text.replace(/\s+/g,""),reportHTML:e};document.getElementById("switchCheckbox").checked?o.reportResult="Pass":o.reportResult="Fail";var a=new XMLHttpRequest;a.open("POST","./uploadReport"),a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(o)),a.onreadystatechange=function(){this.readyState==XMLHttpRequest.DONE&&200==this.status&&(l.innerHTML=this.responseText)}},n.readAsText(t)}function a(e){if(""==e)return!1;var t=new Date(e);return t>new Date("01/01/2015")&&t<=new Date}